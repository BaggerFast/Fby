{% extends 'app.html' %}
{% block content %}
<div class="row mt-5">
    <form action="." method="GET">
        <input type="text" class="form-control d-none" name="update_data" value="1">
        <button id="button_loader" type="submit" class="btn btn-primary">Обновить данные</button>
    </form>
    <form ref="form" method="get" style="margin-top: 20px;">
      <div class="input-group mb-3">
        <input type="text" class="form-control" name="input" aria-describedby="button-addon">
        <button onClick="javascript:document.forms[1].submit();"
                class="btn btn-outline-secondary" type="button" id="button-addon">Поиск</button>
      </div>
    </form>
    {% if search %}
    <a href="{% url 'catalogue_list' %}" class="btn-link" style="text-align: center; margin: 10px;">← Назад</a>
    {% endif %}
    {% if offers %}
    <div class="col">
        <table class="table table-hover table-borderless">
            <thead class="table-secondary">
                <tr>
                    <th scope="col">
                        <h6>Название</h6>
                    </th>
                    <th scope="col">
                        <h6>Описание</h6>
                    </th>
                    <th scope="col">
                        <h6>SKU</h6>
                    </th>
                    <th scope="col">
                        <h6>Категория</h6>
                    </th>
                    <th scope="col">
                        <h6>Продавец</h6>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for offer in offers %}
                <tr>
                    <td><a href="{% url 'offer_by_sku' offer.id %}">{{ offer.name }}</a></td>
                    <td>{{ offer.description }}</td>
                    <td>{{ offer.shopSku }}</td>
                    <td>{{ offer.category }}</td>
                    <td>{{ offer.vendor }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
</div>
<!-- Preloader -->
<style type="text/css">
  #hellopreloader>p {
    display: none;
  }
  #hellopreloader_preload {
    display: none;
    position: fixed;
    z-index: 99999;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    min-width: 100px;
    background: #00000080 url(http://hello-site.ru//main/images/preloads/puff.svg) center center no-repeat;
    background-size: 300px;
  }
</style>
<div id="hellopreloader">
  <div id="hellopreloader_preload"></div>
</div>
<script type="text/javascript">
  var hellopreloader = document.getElementById("hellopreloader");
  var hellopreloader_preload = document.getElementById("hellopreloader_preload");
  var button_loader = document.getElementById("button_loader");
  function fadeOutnojquery(el) {
    el.style.opacity = 1;
    var interhellopreloader = setInterval(function () {
      el.style.opacity = el.style.opacity - 0.05;
      if (el.style.opacity <= 0.05) {
        clearInterval(interhellopreloader);
        hellopreloader_preload.style.display = "none";
      }
    }, 16);
  }
  button_loader.addEventListener("click", function() {
    hellopreloader.style.opacity = 1;
    hellopreloader_preload.style.opacity = 1;
    hellopreloader.style.display = "block";
    hellopreloader_preload.style.display = "block";
  });
</script>
{% endblock %}
